<!DOCTYPE html>
 <html lang="pt-br">
 <head>
     <meta charset="UTF-8">
     <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <title>Watch Party</title>
     <link rel="preconnect" href="https://fonts.googleapis.com">
     <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
     <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
     <style>
         :root {
             --bg-primary: #121212;
             --bg-secondary: #1e1e1e;
             --bg-tertiary: #2c2c2c;
             --text-primary: #e0e0e0;
             --text-secondary: #b3b3b3;
             --border-color: #333;
             --accent-color: #007bff;
             --accent-hover: #0056b3;
             --host-badge-bg: #ffc107;
             --host-badge-text: #121212;
         }

         * {
             box-sizing: border-box;
         }

         body {
             font-family: 'Inter', sans-serif;
             margin: 0;
             display: flex;
             height: 100vh;
             background-color: var(--bg-primary);
             color: var(--text-primary);
             overflow: hidden;
         }

         #main-content {
             flex: 3;
             display: flex;
             flex-direction: column;
             transition: flex 0.3s ease-in-out;
         }

         #video-container {
             background: #000;
             flex: 1;
             display: flex;
             align-items: center;
             justify-content: center;
         }

         video {
             width: 100%;
             height: 100%;
         }

         #sidebar {
             flex: 1;
             min-width: 300px;
             max-width: 350px;
             border-left: 1px solid var(--border-color);
             display: flex;
             flex-direction: column;
             background-color: var(--bg-secondary);
             transition: min-width 0.3s ease-in-out, max-width 0.3s ease-in-out, opacity 0.3s ease-in-out;
             position: relative;
         }

         #sidebar.collapsed {
             min-width: 0;
             flex: 0;
             opacity: 0;
             overflow: hidden;
         }

         #sidebar-toggle {
             position: absolute;
             top: 10px;
             left: -35px;
             width: 25px;
             height: 40px;
             background-color: var(--bg-secondary);
             border: 1px solid var(--border-color);
             border-right: none;
             border-radius: 8px 0 0 8px;
             cursor: pointer;
             display: flex;
             align-items: center;
             justify-content: center;
             color: var(--text-secondary);
             z-index: 10;
         }
         #sidebar-toggle:hover {
             background-color: var(--bg-tertiary);
         }

         #sidebar h3 {
             padding: 15px 20px 10px;
             margin: 0;
             font-size: 1.1em;
             font-weight: 700;
             border-bottom: 1px solid var(--border-color);
         }

         #user-list, #chat-box { padding: 15px; }
         #chat-box { flex: 1; overflow-y: auto; }
         #chat-box::-webkit-scrollbar { width: 8px; }
         #chat-box::-webkit-scrollbar-track { background: var(--bg-secondary); }
         #chat-box::-webkit-scrollbar-thumb { background: var(--bg-tertiary); border-radius: 4px; }
         #chat-box::-webkit-scrollbar-thumb:hover { background: #555; }

         #chat-input-area { display: flex; border-top: 1px solid var(--border-color); padding: 10px; background-color: var(--bg-secondary); }
         #chat-input { flex: 1; border: 1px solid var(--border-color); background-color: var(--bg-tertiary); color: var(--text-primary); padding: 10px; border-radius: 5px; margin-right: 10px; }
         #chat-input:focus { outline: none; border-color: var(--accent-color); }
         #send-btn { border: none; background: var(--accent-color); color: white; padding: 0 15px; border-radius: 5px; cursor: pointer; transition: background-color 0.2s ease; }
         #send-btn:hover { background: var(--accent-hover); }
         #send-btn svg { width: 20px; height: 20px; vertical-align: middle; }

         .user-item img, .chat-msg img { width: 24px; height: 24px; border-radius: 50%; vertical-align: middle; margin-right: 8px; }
         #host-badge { background: var(--host-badge-bg); color: var(--host-badge-text); font-size: 0.7em; font-weight: bold; padding: 2px 5px; border-radius: 4px; margin-left: 5px; }
     </style>
 </head>
 <body>
     <div id="main-content">
         <div id="video-container">
             <video id="player" controls poster="https://via.placeholder.com/1280x720/000000/FFFFFF?text=Carregando+v%C3%ADdeo..."></video>
         </div>
     </div>
     <div id="sidebar">
         <button id="sidebar-toggle" title="Recolher chat">&gt;</button>
         <h3>Usu√°rios</h3>
         <div id="user-list"></div>
         <h3>Chat</h3>
         <div id="chat-box"></div>
         <div id="chat-input-area">
             <input id="chat-input" type="text" placeholder="Digite uma mensagem...">
             <button id="send-btn" title="Enviar mensagem">
                 <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"></path></svg>
             </button>
         </div>
     </div>

     <script src="https://cdn.socket.io/4.7.5/socket.io.min.js"></script>
     <script src="/files/client.js"></script>
     <script>
         const sidebar = document.getElementById('sidebar');
         const toggleBtn = document.getElementById('sidebar-toggle');

         toggleBtn.addEventListener('click', () => {
             sidebar.classList.toggle('collapsed');
             if (sidebar.classList.contains('collapsed')) {
                 toggleBtn.innerHTML = '&lt;';
                 toggleBtn.title = 'Expandir chat';
             } else {
                 toggleBtn.innerHTML = '&gt;';
                 toggleBtn.title = 'Recolher chat';
             }
         });
     </script>
 </body>
 </html>